Z.define("footer/footer",{initialize:function(){this.$wrap=$(".global_footer"),this.bindEvent()},bindEvent:function(){var t=this,e=$(document),a=$(".side_btn"),i=a.find(".to_up");$(window).scroll(function(){e.scrollTop()>$(window).height()/4?a.css("bottom","40px"):a.css("bottom","-90px")}),i.click(function(){$("body,html").animate({scrollTop:0},300)});var n=a.find(".contect_btn"),s=$(".content_writer"),o=$(".bg_writer");window.mobile_id&&n.show();var r=$(".user_reply"),c=new Dialog({content:r.show(),close:function(){o.hide()}}),l=c.$wrap;l.on("click",".pop_close",function(){c.hide()}),l.find(".dialog_inner").css({width:"460px",height:"220px","margin-top":"-110px","margin-left":"-230px"}).addClass("contect_dialog");var h=r.find(".bg_content");n.on("click",function(){islogin?(c.show(),o.show()):window.location.href=WWW_HOST+"/login/index?redirect="+encodeURIComponent(window.location.href)});var d=!1,p=h.find("textarea");p.on("focus",function(){$(this).html("")}),h.on("click",".contect_btn",function(){if(!d){{$(this)}if($(this).html("\u63d0\u4ea4\u4e2d"),"\u8bf7\u8f93\u5165\u60a8\u7684\u53cd\u9988\u5185\u5bb9..."==p.val()||!p.val())return alert("\u8bf7\u586b\u5199\u5185\u5bb9"),!1;d=!0;var t="<p>\u611f\u8c22\u60a8\u7684\u5efa\u8bae\u548c\u53cd\u9988\uff01</p><p>\u6211\u4eec\u4f1a\u8003\u8651\u60a8\u7684\u5efa\u8bae\uff0c\u4e5f\u6b22\u8fce\u60a8\u6301\u7eed\u5730\u76d1\u7763\u6211\u4eec~</p>";l.find(".dialog_inner").fadeOut(600),s.html(t).animate({"margin-top":"-100px"},600),o.addClass("bg_writer_perspective");var e="writer 1s ease-in 0s 1 normal forwards";$.get("/data/suggest",{content:p.val()},function(t){200==t.status?(s.css({animation:e,"-webkit-animation":e,"-moz-animation":e,"-o-animation":e}),setTimeout(function(){location.reload()},1e3)):alert(t.message),d=!1},"json")}});var u=t.$wrap.find(".wechat_btn"),g=t.$wrap.find(".wechat_img");u.on("mouseenter",function(){g.stop().show()}),u.on("mouseleave",function(){g.stop().hide()})}});var Dialog=function(t){this.opts=$.extend({content:"",popClose:!1,ok:["\u786e\u8ba4",function(){}],cancel:["\u53d6\u6d88",function(){}],close:function(){},height:"",width:""},t),this.init()};Dialog.prototype={init:function(){this.createDom(),this.bindEvent()},createDom:function(){var t=[],e=this;t.push('<div class="global_dialog">'),t.push('<div class="dialog_closebg">'),t.push("</div>"),t.push('<div class="dialog_inner">'),e.opts.popClose&&(t.push('<div class="dialog_close">x'),t.push("</div>")),t.push('<div class="dialog_content">'),t.push("</div>"),t.push("</div>"),t.push("</div>"),this.$wrap=$(t.join("")),$wrapinnerWidth=this.opts.width,$wrapinnerHeight=this.opts.height;var a=0==$wrapinnerHeight?"autoHeight":"";this.$wrap.find(".dialog_inner").addClass(a).css({"margin-left":-($wrapinnerWidth/2),"margin-top":-($wrapinnerHeight/2)}),this.$wrap.find(".dialog_content").append(this.opts.content),$("body").append(this.$wrap),this.$close=this.$wrap.find(".pop_close")},bindEvent:function(){var t=this;this.$close.on("click",function(e){t.opts.close&&t.opts.close(e),t.hide()})},show:function(){this.$wrap.show()},hide:function(){this.$wrap.hide()},setContent:function(t){this.$wrap.find(".dialog_content").html(t)},on:function(){this.$wrap.on.apply(this.$wrap,arguments)},find:function(){return this.$wrap.find.apply(this.$wrap,arguments)}};var Drawer=function(t){this.opts=$.extend({wrap:"",onSelect:function(){}},t),this.init()};Drawer.prototype={init:function(){this.$wrap=$(this.opts.wrap),this.$drawer=this.$wrap.find("ul.drawer_list"),this.bindEvent()},bindEvent:function(){var t=this;this.$wrap.on("mouseenter",function(){t.$drawer.show()}),this.$wrap.on("mouseleave",function(){t.$drawer.hide()}),this.$drawer.on("click","li",function(e){var a=$(this);t.opts.onSelect&&t.opts.onSelect(a),e.stopPropagation()})}};var Page=function(t){this.opts=$.extend({wrap:"",num:3,currentPage:1,totalPage:0,data:{},url:"/media",type:"json",next:!0,prev:!0,loadWrap:"",callback:function(){}},t),this.init()};Page.prototype={init:function(){this.dataCache={};var t=F.parseURL().params.page;t?(this.setStyle(t),this.getData(t)):this.setStyle(this.opts.currentPage)},setStyle:function(t){this.currentPage=t,this.totalPage=this.opts.totalPage;var e="",a=1,i=this.opts.totalPage,n=this.opts.num,s=2*n+3,o=(s+1)/2;this.currentPage=parseInt(this.currentPage);var r=F.parseURL().query,c=r.search(/page=/);r=r.slice(c+5),this.opts.prev&&(e+='<a class="prev" style="display: none" data-value='+this.currentPage+' href="javascript:;"> &lt;</a>',r&&r>1&&$(".global_page").find(".prev").show().data("value",r));var l=function(t,e){return e=e||"","current"==e?'<a href="javascript:;" class="curr page">'+t+"</a>":"dot"==e?"<span>&nbsp;</span>":'<a href="javascript:;" class="page" title="\u7b2c'+t+'\u9875">'+t+"</a>"},h=l("","dot"),d=l("","dot")+l(this.totalPage);if(this.totalPage<=s)for(var c=1;c<=this.totalPage;c++)e+=this.currentPage==c?l(c,"current"):l(c);else if(this.currentPage<=o){for(var c=1;s-1>=c;c++)e+=this.currentPage==c?l(c,"current"):l(c);e+=d}else{e+=l(1),e+=h,a=this.currentPage-n,i=this.currentPage+n,this.totalPage-this.currentPage<=n+1&&(i=this.totalPage,a=this.totalPage-(2*n+1));for(var c=a;i>=c;c++)e+=this.currentPage==c?l(c,"current"):l(c);i!=this.totalPage&&(e+=d)}this.$wrap=$(this.opts.wrap),this.$page=$('<div class="global_page">'),this.opts.next&&(e+='<a class="next" data-value='+this.currentPage+' href="javascript:;">&gt; </a>'),this.totalPage<=1&&(e=""),this.$page.html(e),this.$wrap.empty().append(this.$page),this.$pageNum=this.$page.find("a"),this.bindEvent()},bindEvent:function(){var t=this;this.$page.on("click",".page",function(){var e=$(this);if(e.hasClass("curr"))return!1;t.currentPage=parseInt(e.text()),t.setStyle(t.currentPage),t.getData(t.currentPage),1==t.currentPage?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show(),t.currentPage>=t.opts.totalPage&&$(".global_page").find(".next").hide();var a=F.parseURL().query.replace(/[?&]page=(\d)*/,""),i=""===a?"all":a.split("=")[1];window.history.pushState&&window.history.pushState({page:t.currentPage,type:i},""),1==this.currentPage?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show(),this.currentPage>=t.opts.totalPage&&$(".global_page").find(".next").hide();var a=F.parseURL().query.replace(/[?&]page=(\d)*/,""),i=(a+(a.indexOf("?")>-1?"&":"?")+"page="+this.currentPage,""===a?"all":a.split("=")[1]);return!1}),this.$page.on("click",".prev",function(){var e=$(this),a=e.data("value")-1;a>=1&&(t.setStyle(a),t.getData(a)),1==a?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show()}),this.$page.on("click",".next",function(){var e=$(this),a=e.data("value")+1;a<=t.opts.totalPage&&(t.setStyle(a),t.getData(a)),$(".global_page").find(".prev").show(),a>=t.opts.totalPage&&$(".global_page").find(".next").hide()})},getData:function(t){var e=this;return this.currentPage=t,this.opts.loadWrap&&this.opts.loadWrap.html('<div class="load_wrap"><span class="loading"></span></div>'),this.dataCache[this.currentPage]?(this.opts.callback&&this.opts.callback(this.dataCache[this.currentPage],this.currentPage,!0),void 0):("html"==this.opts.type?$.post(this.opts.url,$.extend({page:e.currentPage},this.opts.data),function(t){e.dataCache[e.currentPage]=t,e.opts.callback&&e.opts.callback(t,e.currentPage,!1)}):$.post(this.opts.url,$.extend({page:e.currentPage},this.opts.data),function(t){200==t.status?(e.dataCache[e.currentPage]=t,e.opts.callback&&e.opts.callback(t,e.currentPage,!1)):alert(t.message)},"json"),void 0)}};var PageHtml=function(t){this.opts=$.extend({wrap:"",num:3,currentPage:1,totalPage:0,next:!0,prev:!0},t),this.init()};PageHtml.prototype={init:function(){this.setStyle(this.opts.currentPage)},setStyle:function(t){this.currentPage=t,this.totalPage=this.opts.totalPage;var e="",a=1,i=this.opts.totalPage,n=this.opts.num,s=2*n+3,o=(s+1)/2;this.currentPage=parseInt(this.currentPage);var r=function(t){var e=F.parseURL().source,a=/page=([0-9]*)/;if(a.test(e)){{parseInt(RegExp.$1)}e=e.replace(a,"page="+t)}else e=F.parseURL().path+"?page="+t;return e};this.opts.prev&&this.currentPage>1&&(e+='<a class="prev"  data-value='+this.currentPage+' href="'+r(this.currentPage-1)+'"> &lt;</a>');var c=function(t,e){return e=e||"","current"==e?'<a href="'+r(t)+'" class="curr page">'+t+"</a>":"dot"==e?"<span>&nbsp;</span>":'<a href="'+r(t)+'" class="page" title="\u7b2c'+t+'\u9875">'+t+"</a>"},l=c("","dot"),h=c("","dot")+c(this.totalPage);if(this.totalPage<=s)for(var d=1;d<=this.totalPage;d++)e+=this.currentPage==d?c(d,"current"):c(d);else if(this.currentPage<=o){for(var d=1;s-1>=d;d++)e+=this.currentPage==d?c(d,"current"):c(d);e+=h}else{e+=c(1),e+=l,a=this.currentPage-n,i=this.currentPage+n,this.totalPage-this.currentPage<=n+1&&(i=this.totalPage,a=this.totalPage-(2*n+1));for(var d=a;i>=d;d++)e+=this.currentPage==d?c(d,"current"):c(d);i!=this.totalPage&&(e+=h)}this.$wrap=$(this.opts.wrap),this.$page=$('<div class="global_page">'),this.opts.next&&this.currentPage<this.totalPage&&(e+='<a class="next" data-value='+this.currentPage+' href="'+r(this.currentPage+1)+'">&gt; </a>'),(this.totalPage<=1||isNaN(this.totalPage))&&(e=""),this.$page.html(e),this.$wrap.empty().append(this.$page)}};var Loadmore=function(t){this.opts=$.extend({wrap:"",requestData:{},url:"",count:10,callback:function(){}},t),this.init()};Loadmore.prototype={init:function(){var t=this,e=t.opts.wrap;this.$moreWrap=e.find(".global_more_wrap"),this.$loadGif=e.find(".global_load"),this.$loadBox=e.find(".global_more_content"),this.total_num=0,this.page=1,this.postSwitch=!0,this.bindEvent(),this.getData()},bindEvent:function(){var t=this,e=$(window).height(),a=50;$(window).scroll(function(){var i=$(window).scrollTop(),n=parseFloat(e)+parseFloat(i),s=parseFloat($(document).height()),o=Math.ceil(t.total_num/t.opts.count);n>s-a&&t.page<=o&&t.postSwitch&&(t.postSwitch=!1,t.page++,t.getData(t.page)),t.page>o&&t.$loadBox.show()})},getData:function(t){var e=this,a=e.opts.url,i=e.opts.requestData,n=e.opts.count;t=t||1,e.$loadGif.show(),i.page=t,i.count=n,i.t=+new Date,$.get(a,i,function(t){e.postSwitch=!0,200==t.status?(setTimeout(function(){},2e3),e.$loadGif.hide(),e.$loadBox.hide(),e.$moreWrap.append(t.message.html),e.total_num=t.message.total_number,e.total_num<e.opts.count&&e.$loadBox.show(),e.opts.callback&&e.opts.callback()):alert(t.message)},"json")}},$("body").on("click",".global_gaNode",function(){var t=$(this),e=t.data("galabel")||"",a=t.data("id")||0,i=t.data("gavalue")||0,n=F.parseURL(),s="index"==n.controller?"/":"/"+n.controller,o="index"==n.action?"":"/"+n.action,r=n.protocol+"://"+n.host+s+o;if(e.indexOf("home_banner_big_detail")>-1){var c=e+"_"+a;F.ga("home_big_banner","click",c,i)}F.ga(r,"click",e,i)}),Z.define("global/header",{initialize:function(){this.$container=$("body"),this.path=F.parseURL().controller||"",this.$account_seperate=this.$container.find(".account_seperate"),this.$mHeaderRight=this.$container.find(".mHeader_right"),"apple2016"!=this.path?this.showUser():(this.$account_seperate.hide(),this.$mHeaderRight.hide()),this.$postUser=this.$container.find(".user_card"),this.$mHeader=$(".global_mHeader"),this.bindEvt(),this.updateStatus(),this.updateStatusSidebar()},bindEvt:function(){var t=this,e=t.$mHeader.find(".mHeader_menu"),a=$(".global_cover"),i=$(".global_appDownload"),n=$(window);e.click(function(){t.$mHeader.hasClass("mHeader_white")?($(".mHeader_menuList").animate({top:"-360"},400,function(){t.$mHeader.removeClass("mHeader_white")}),a.hide()):(t.$mHeader.addClass("mHeader_white"),$(".mHeader_menuList").animate({top:"44"},400),a.show())}),a.click(function(){$(".mHeader_menuList").animate({top:"-360"},400,function(){t.$mHeader.removeClass("mHeader_white")}),a.hide()}),i.length>0&&$(window).scroll(function(){$(document).scrollTop()>2*n.height()/3&&n.width()<721?i.show():i.hide()});var s=$(".head_searchInput"),o=$(".head_searchIcon");o.click(function(){var t=$.trim(s.val());window.location.href="/search/index?type=video&keyword="+t}),s.keydown(function(t){$(this);13==t.which&&o.click()})},showData:function(t){function e(t,e,a){var i=new Date;i.setDate(i.getDate()+a),document.cookie=t+"="+escape(e)+(null==a?"":"; expires="+i.toGMTString())+";path=/;domain=.zealer.com"}function a(t){return document.cookie.length>0&&(c_start=document.cookie.indexOf(t+"="),-1!=c_start)?(c_start=c_start+t.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}var i=t.username,n=t.uid,s=/mb_pic50\.gif$/;if(t.imgURL.match(s)&&a("z_data")!=n+"nodata"){e("z_data",n,3650);var o=new Dialog({content:F.template("showData.tpl",{}),popClose:!0,width:360,height:400});o.show(),o.$wrap.addClass("global_new_dialog"),o.find("#msg_pic").attr("src",t.imgURL),o.find("#msg_name").html(i),o.find(".dialog_close").on("click",function(){o.hide(),e("z_data",n+"nodata",3650)}),o.find(".msg_btn_box").on("click",function(){o.hide(),e("z_data",n+"nodata",3650)})}},showUser:function(){function t(t){var a=/w\/28\/h\/28/;e.$postUser&&e.$postUser.find("img").attr("src",t.imgURL.replace(a,"w/50/h/50"));var i=e.$container.find(".no_login_toReply"),n=e.$container.find(".user_comment");i.length>0&&(i.hide(),n.show()),e.bigNav(t)}var e=this,a=e.$container.find(".global_header"),i=e.$container.find(".page_header"),n=a.find(".app_download"),s=a.find(".app_area");n.hover(function(){s.show()},function(){s.hide()}),$.get("/index/showUser",function(n){if(200==n.status){var s=n.message;t(s),e.showData(s),e.$mHeader.find(".mHeader_login").hide(),e.$mHeader.find(".user_img").attr("src",s.imgURL.replace(reg,"/50/50")),e.$mHeader.find(".img_link").show();var o=$(".sms_inform"),r=$(".inner_account"),c=o.find(".sms_inform_list ul"),l=r.find(".account_message");"Y"==s.isPlatform&&r.find(".isPlatform").show();var h=n.message.notice,d=h.empty,p=h.list,u=h.total_number?h.total_number:0,g="",f="";if(d)f="<li>\u6682\u65e0\u901a\u77e5</li>";else for(var m in p)if(p.hasOwnProperty(m)){switch(m){case"reply":g=WWW_HOST+"message?type=discuss";break;case"assist":g=WWW_HOST+"message?type=appro";break;case"collect":g=WWW_HOST+"message?type=collect";break;case"answer":g=WWW_HOST+"message?type=answer"}f+='<li><a href="javascript:void(0);" data-url='+g+" data-type="+m+' class="clear"><span class="sms_inform_name">'+p[m].c_name+'</span><span class="sms_inform_num">'+p[m].total_number+"</span></a></li>"}c.html(f),0!=u?(r.find(".message_num").text("("+u+")"),l.removeClass("no_show"),r.find(".sms_list").css("left","-100px")):l.hasClass("no_show")||(r.find(".message_num").text(""),l.addClass("no_show")),l.on("mouseenter",function(){l.hasClass("no_show")||o.show()}).on("mouseleave",function(){o.hide()}),o.on("mouseenter",function(){l.hasClass("no_show")||o.show()}).on("mouseleave",function(){o.hide()})}else a.is(":visible")?a.find(".inner_login").show():i.find(".inner_login").show()},"json")},bigNav:function(t){function e(){$.get("/index/sms?t=0",function(t){s.html(t);var a=s.find(".sms_arrow").attr("totalnum");"0"!=a&&void 0!=a?n.find(".letter_num").html("("+a+")"):n.find(".letter_num").html(""),s.on("click",".list_detail",function(){var t=$(this).attr("sid"),a=$(this).attr("rid");$.get("/message/reading",{s_id:t,r_id:a},function(){e()},"json")}),s.on("click",".sms_btn span",function(){$.get("/message/readingAll",{},function(){e(),n.find(".letter_num").html("")},"json")}),n.on("mouseenter",function(){}),n.on("mouseleave",function(){s.hide().on("mouseleave",function(){$(this).hide()})})},"html")}var a=this,i=a.$container.find(".global_header .inner_account"),n=(i.find(".account_message"),i.find(".account_letter")),s=(i.find(".message_list"),i.find(".sms_list")),o=(i.find(".sms_inform"),i.find(".account_user")),r=o.find(".user_img");r.attr("src",t.imgURL),o.find(".active_name").html(t.nickname.substring(0,8));var c=a.$container.find(".inner_login");c.hide(),i.show();var l=i.find(".account_user"),h=l.find(".user_active");l.on("mouseenter",function(){h.show()}),l.on("mouseleave",function(){h.hide()}),e()},updateStatus:function(){var t=this,e=t.$container.find(".global_header .inner_account"),a=e.find(".sms_inform_list");a.on("click","a",function(){var e=$(this),a=e.data("type"),i=e.data("url");$.get("/message/updateStatus",{type:a},function(a){200==a.status&&(e.closest("li").remove(),t.showUser(),window.location.href=i)},"json")})},updateStatusSidebar:function(){var t=$(".message_list .content_left .left_list");t.on("click","a",function(){var t=$(this),e=t.attr("otype");if(e="discuss"==e?"reply":"appro"==e?"assist":e,"inbox"!=e){var a=t.data("url");$.get("/message/updateStatus",{type:e},function(e){200==e.status&&(t.closest("li").remove(),window.location.href=a)},"json")}})}}),Z.define("global/mediaHeader",{initialize:function(){var t=$(".media_nav"),e=function(){$(document).scrollTop()>40?t.css({top:0}).find(".nav_arrow").hide():t.css({top:40-$(document).scrollTop()}).find(".nav_arrow").show()};e(),$(window).scroll(e)}}),Vue.component("videoList",{props:["vlist"],template:"#v-template",data:function(){return{}}});